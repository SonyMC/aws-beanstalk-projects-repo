(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{37:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(30),r=a.n(o),l=(a(37),a(67)),c=a(69),i=a(68),d=a(66),m=a(6),u=a.n(m);const h="http://restapibackendfornodejsfrontend-env.eba-tpui9kui.us-east-1.elasticbeanstalk.com",p="".concat(h,"/jpa"),g="authenticatedUser";var E=new class{executeBasicAuthenticationService(e,t){return u.a.get("".concat(h,"/basicauth"),{headers:{authorization:this.createBasicAuthToken(e,t)}})}executeJwtAuthenticationService(e,t){return u.a.post("".concat(h,"/authenticate"),{username:e,password:t})}createBasicAuthToken(e,t){return"Basic "+window.btoa(e+":"+t)}registerSuccessfulLogin(e,t){sessionStorage.setItem(g,e),this.setupAxiosInterceptors(this.createBasicAuthToken(e,t))}registerSuccessfulLoginForJwt(e,t){sessionStorage.setItem(g,e),this.setupAxiosInterceptors(this.createJWTToken(t))}createJWTToken(e){return"Bearer "+e}logout(){sessionStorage.removeItem(g)}isUserLoggedIn(){return null!==sessionStorage.getItem(g)}getLoggedInUserName(){let e=sessionStorage.getItem(g);return null===e?"":e}setupAxiosInterceptors(e){u.a.interceptors.request.use((t=>(this.isUserLoggedIn()&&(t.headers.authorization=e),t)))}};class v extends n.Component{render(){return E.isUserLoggedIn()?s.a.createElement(i.a,this.props):s.a.createElement(d.a,{to:"/login"})}}var b=v;class w extends n.Component{constructor(e){super(e),this.state={username:"in28minutes",password:"",hasLoginFailed:!1,showSuccessMessage:!1},this.handleChange=this.handleChange.bind(this),this.loginClicked=this.loginClicked.bind(this)}handleChange(e){this.setState({[e.target.name]:e.target.value})}loginClicked(){E.executeJwtAuthenticationService(this.state.username,this.state.password).then((e=>{E.registerSuccessfulLoginForJwt(this.state.username,e.data.token),this.props.history.push("/welcome/".concat(this.state.username))})).catch((()=>{this.setState({showSuccessMessage:!1}),this.setState({hasLoginFailed:!0})}))}render(){return s.a.createElement("div",null,s.a.createElement("h1",null,"Login"),s.a.createElement("div",{className:"container"},this.state.hasLoginFailed&&s.a.createElement("div",{className:"alert alert-warning"},"Invalid Credentials"),this.state.showSuccessMessage&&s.a.createElement("div",null,"Login Sucessful"),"User Name: ",s.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),"Password: ",s.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),s.a.createElement("button",{className:"btn btn-success",onClick:this.loginClicked},"Login")))}}var C=w;var k=new class{retrieveAllTodos(e){return u.a.get("".concat(p,"/users/").concat(e,"/todos"))}retrieveTodo(e,t){return u.a.get("".concat(p,"/users/").concat(e,"/todos/").concat(t))}deleteTodo(e,t){return u.a.delete("".concat(p,"/users/").concat(e,"/todos/").concat(t))}updateTodo(e,t,a){return u.a.put("".concat(p,"/users/").concat(e,"/todos/").concat(t),a)}createTodo(e,t){return u.a.post("".concat(p,"/users/").concat(e,"/todos/"),t)}},T=a(12),N=a.n(T);class S extends n.Component{constructor(e){console.log("constructor"),super(e),this.state={todos:[],message:null},this.deleteTodoClicked=this.deleteTodoClicked.bind(this),this.updateTodoClicked=this.updateTodoClicked.bind(this),this.addTodoClicked=this.addTodoClicked.bind(this),this.refreshTodos=this.refreshTodos.bind(this)}componentWillUnmount(){console.log("componentWillUnmount")}shouldComponentUpdate(e,t){return console.log("shouldComponentUpdate"),console.log(e),console.log(t),!0}componentDidMount(){console.log("componentDidMount"),this.refreshTodos(),console.log(this.state)}refreshTodos(){let e=E.getLoggedInUserName();k.retrieveAllTodos(e).then((e=>{this.setState({todos:e.data})}))}deleteTodoClicked(e){let t=E.getLoggedInUserName();k.deleteTodo(t,e).then((t=>{this.setState({message:"Delete of todo ".concat(e," Successful")}),this.refreshTodos()}))}addTodoClicked(){this.props.history.push("/todos/-1")}updateTodoClicked(e){console.log("update "+e),this.props.history.push("/todos/".concat(e))}render(){return console.log("render"),s.a.createElement("div",null,s.a.createElement("h1",null,"List Todos"),this.state.message&&s.a.createElement("div",{class:"alert alert-success"},this.state.message),s.a.createElement("div",{className:"container"},s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Description"),s.a.createElement("th",null,"Target Date"),s.a.createElement("th",null,"IsCompleted?"),s.a.createElement("th",null,"Update"),s.a.createElement("th",null,"Delete"))),s.a.createElement("tbody",null,this.state.todos.map((e=>s.a.createElement("tr",{key:e.id},s.a.createElement("td",null,e.description),s.a.createElement("td",null,N()(e.targetDate).format("YYYY-MM-DD")),s.a.createElement("td",null,e.done.toString()),s.a.createElement("td",null,s.a.createElement("button",{className:"btn btn-success",onClick:()=>this.updateTodoClicked(e.id)},"Update")),s.a.createElement("td",null,s.a.createElement("button",{className:"btn btn-warning",onClick:()=>this.deleteTodoClicked(e.id)},"Delete"))))))),s.a.createElement("div",{className:"row"},s.a.createElement("button",{className:"btn btn-success",onClick:this.addTodoClicked},"Add"))))}}var f=S;var D=function(){return s.a.createElement("div",null,"An Error Occurred. I don't know what to do! Contact support at abcd-efgh-ijkl")},x=a(65);class M extends n.Component{render(){const e=E.isUserLoggedIn();return s.a.createElement("header",null,s.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark"},s.a.createElement("div",null,s.a.createElement("a",{href:"http://www.in28minutes.com",className:"navbar-brand"},"in28Minutes")),s.a.createElement("ul",{className:"navbar-nav"},e&&s.a.createElement("li",null,s.a.createElement(x.a,{className:"nav-link",to:"/welcome/in28minutes"},"Home")),e&&s.a.createElement("li",null,s.a.createElement(x.a,{className:"nav-link",to:"/todos"},"Todos"))),s.a.createElement("ul",{className:"navbar-nav navbar-collapse justify-content-end"},!e&&s.a.createElement("li",null,s.a.createElement(x.a,{className:"nav-link",to:"/login"},"Login")),e&&s.a.createElement("li",null,s.a.createElement(x.a,{className:"nav-link",to:"/logout",onClick:E.logout},"Logout")))))}}var I=M;class L extends n.Component{render(){return s.a.createElement("footer",{className:"footer"},s.a.createElement("span",{className:"text-muted"},"All Rights Reserved 2018 @in28minutes"))}}var U=L;class A extends n.Component{render(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",null,"You are logged out"),s.a.createElement("div",{className:"container"},"Thank You for Using Our Application."))}}var W=A;var y=new class{executeHelloWorldService(){return u.a.get("".concat(h,"/hello-world"))}executeHelloWorldBeanService(){return u.a.get("".concat(h,"/hello-world-bean"))}executeHelloWorldPathVariableService(e){return u.a.get("".concat(h,"/hello-world/path-variable/").concat(e))}};class Y extends n.Component{constructor(e){super(e),this.retrieveWelcomeMessage=this.retrieveWelcomeMessage.bind(this),this.state={welcomeMessage:""},this.handleSuccessfulResponse=this.handleSuccessfulResponse.bind(this),this.handleError=this.handleError.bind(this)}render(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",null,"Welcome!"),s.a.createElement("div",{className:"container"},"Welcome ",this.props.match.params.name,". You can manage your todos ",s.a.createElement(x.a,{to:"/todos"},"here"),"."),s.a.createElement("div",{className:"container"},"Click here to get a customized welcome message.",s.a.createElement("button",{onClick:this.retrieveWelcomeMessage,className:"btn btn-success"},"Get Welcome Message")),s.a.createElement("div",{className:"container"},this.state.welcomeMessage))}retrieveWelcomeMessage(){y.executeHelloWorldPathVariableService(this.props.match.params.name).then((e=>this.handleSuccessfulResponse(e))).catch((e=>this.handleError(e)))}handleSuccessfulResponse(e){console.log(e),this.setState({welcomeMessage:e.data.message})}handleError(e){console.log(e.response);let t="";e.message&&(t+=e.message),e.response&&e.response.data&&(t+=e.response.data.message),this.setState({welcomeMessage:t})}}var B=Y,F=a(11);class J extends n.Component{constructor(e){super(e),this.state={id:this.props.match.params.id,description:"",targetDate:N()(new Date).format("YYYY-MM-DD")},this.onSubmit=this.onSubmit.bind(this),this.validate=this.validate.bind(this)}componentDidMount(){if(-1===this.state.id)return;let e=E.getLoggedInUserName();k.retrieveTodo(e,this.state.id).then((e=>this.setState({description:e.data.description,targetDate:N()(e.data.targetDate).format("YYYY-MM-DD")})))}validate(e){let t={};return e.description?e.description.length<5&&(t.description="Enter atleast 5 Characters in Description"):t.description="Enter a Description",N()(e.targetDate).isValid()||(t.targetDate="Enter a valid Target Date"),t}onSubmit(e){let t=E.getLoggedInUserName(),a={id:this.state.id,description:e.description,targetDate:e.targetDate};-1===this.state.id?k.createTodo(t,a).then((()=>this.props.history.push("/todos"))):k.updateTodo(t,this.state.id,a).then((()=>this.props.history.push("/todos"))),console.log(e)}render(){let e=this.state,t=e.description,a=e.targetDate;return s.a.createElement("div",null,s.a.createElement("h1",null,"Todo"),s.a.createElement("div",{className:"container"},s.a.createElement(F.d,{initialValues:{description:t,targetDate:a},onSubmit:this.onSubmit,validateOnChange:!1,validateOnBlur:!1,validate:this.validate,enableReinitialize:!0},(e=>s.a.createElement(F.c,null,s.a.createElement(F.a,{name:"description",component:"div",className:"alert alert-warning"}),s.a.createElement(F.a,{name:"targetDate",component:"div",className:"alert alert-warning"}),s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("label",null,"Description"),s.a.createElement(F.b,{className:"form-control",type:"text",name:"description"})),s.a.createElement("fieldset",{className:"form-group"},s.a.createElement("label",null,"Target Date"),s.a.createElement(F.b,{className:"form-control",type:"date",name:"targetDate"})),s.a.createElement("button",{className:"btn btn-success",type:"submit"},"Save"))))))}}var R=J;class H extends n.Component{render(){return s.a.createElement("div",{className:"TodoApp"},s.a.createElement(l.a,null,s.a.createElement(s.a.Fragment,null,s.a.createElement(I,null),s.a.createElement(c.a,null,s.a.createElement(i.a,{path:"/",exact:!0,component:C}),s.a.createElement(i.a,{path:"/login",component:C}),s.a.createElement(b,{path:"/welcome/:name",component:B}),s.a.createElement(b,{path:"/todos/:id",component:R}),s.a.createElement(b,{path:"/todos",component:f}),s.a.createElement(b,{path:"/logout",component:W}),s.a.createElement(i.a,{component:D})),s.a.createElement(U,null))))}}var j=H;a(62),a(63);class z extends n.Component{render(){return s.a.createElement("div",{className:"App"},s.a.createElement(j,null))}}var O=z;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))}},[[64,1,2]]]);
//# sourceMappingURL=main.2642e38f.chunk.js.map